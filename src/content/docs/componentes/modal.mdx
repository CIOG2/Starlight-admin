---
title: "Modales"
description: "Destiny | MultiBrand Design System de PriceTravel Holding"
---

import { LinkCard } from '@astrojs/starlight/components';
import { Card } from '@astrojs/starlight/components';
import { Code } from '@astrojs/starlight/components';

export const exampleCode = `console.log('춰Esto podr칤a provenir de un archivo o CMS!');`;
export const fileName = '';

## 쯈ue es un modal?
Un modal es una ventana emergente o cuadro de di치logo que aparece sobre el contenido principal de una p치gina web o aplicaci칩n, generalmente para captar la atenci칩n del usuario y solicitar una acci칩n o mostrar informaci칩n importante. Al aparecer, el modal suele oscurecer el fondo para centrar la atenci칩n en 칠l, lo que impide interactuar con el resto de la p치gina hasta que se cierre.

## Caracter칤sticas de los Modales
- **Superposici칩n:** Aparece sobre el contenido existente.
- **Enfoque:** El usuario no puede interactuar con el resto de la p치gina hasta que cierre el modal.
- **Cierre:** Se cierra mediante un bot칩n (como una 'X' en la esquina), al hacer clic fuera del modal o presionando la tecla 'Escape'.
- **Uso com칰n:** Confirmaciones (como eliminar un archivo), formularios, alertas, im치genes ampliadas o contenido adicional sin cambiar de p치gina.

## Interacciones
Las interacciones en los modales son las acciones que los usuarios realizan para abrir, cerrar o navegar dentro del modal. Incluyen clics en botones, teclas del teclado (como Escape o Enter), gestos t치ctiles en m칩viles y scroll interno para contenido largo. Estas acciones mejoran la experiencia de usuario y garantizan la accesibilidad en diferentes dispositivos y navegadores.

### Tecla Escape (Esc)
La forma m치s com칰n y esperada de cerrar un modal. Se debe prevenir el evento en Linux para evitar conflictos con ventanas del sistema.

<Code code={`
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modal.classList.contains('modalGC__section--entry-animation')) {
        e.preventDefault();  // 游댠 Evita conflictos en Linux
        closeModal();
    }
});
`} lang="js" title="escape.js"/>

### Tecla Enter (En botones de cierre)
Si el bot칩n de cerrar tiene el foco, Enter debe cerrarlo. Aseg칰rate de que el bot칩n tenga `tabindex="0"`.

<Code code={`
<button class="modal-close" tabindex="0">Cerrar</button>
`} lang="html" title="boton-cierre.html"/>

### Tecla Space (En botones de cierre)
Similar a Enter, pero en Firefox en Linux puede provocar desplazamiento, solucionalo con `preventDefault()`.

<Code code={`
document.querySelector('.modal-close').addEventListener('keydown', (e) => {
    if (e.key === ' ' || e.key === 'Spacebar') {
        e.preventDefault();  // 游댠 Evita el scroll en Firefox
        closeModal();
    }
});
`} lang="js" title="space.js"/>

### Combinaciones de Teclas (Cmd + W / Ctrl + W)
Deben cerrar el modal en lugar de la pesta침a.

<Code code={`
document.addEventListener('keydown', (e) => {
    if ((e.metaKey || e.ctrlKey) && e.key === 'w') {
        e.preventDefault();
        closeModal();  // 游댠 Cierra el modal en lugar de la pesta침a
    }
});
`} lang="js" title="combinaciones.js"/>

---

### Toque en el Bot칩n de Cerrar (X)
Aseg칰rate de que el 치rea t치ctil sea suficientemente grande.

<Code code={`
.modal-close {
    width: 44px;  // 游댠 츼rea t치ctil m칤nima
    height: 44px;
}
`} lang="css" title="tactil.css"/>

### Toque Fuera del Modal (Overlay Tap)
En Safari iOS, usa `touch-action: auto` para evitar problemas.

<Code code={`
.modal-overlay {
    touch-action: auto;  // 游댠 Evita problemas en Safari iOS
}
`} lang="css" title="overlay.css"/>

### Gestos T치ctiles (Swipe)
Deslizar hacia abajo para cerrar es ideal para Bottom Sheets.

<Code code={`
let touchStartY = 0;
modal.addEventListener('touchstart', (e) => {
    touchStartY = e.touches[0].clientY;
});
modal.addEventListener('touchend', (e) => {
    const touchEndY = e.changedTouches[0].clientY;
    if (touchEndY > touchStartY + 50) {  // 游댠 Deslizar hacia abajo para cerrar
        closeModal();
    }
});
`} lang="js" title="swipe.js"/>

### Bot칩n de Atr치s en Android (Back Button)
El bot칩n de retroceso debe cerrar el modal en lugar de navegar fuera de la p치gina.

<Code code={`
window.addEventListener('popstate', () => {
    if (modal.classList.contains('modalGC__section--entry-animation')) {
        closeModal();  // 游댠 Cierra el modal en Android
    }
});
`} lang="js" title="backbutton.js"/>

### Scroll en Modales con Teclas de Flecha
Permite desplazar el contenido de un modal utilizando las teclas **ArrowUp** y **ArrowDown**, aplicando el scroll **solo al contenido interno** del modal.

<Code code={`
const modalContent = document.querySelector('.modal-content');

// Asignar tabindex para permitir el foco y capturar el evento keydown
modalContent.setAttribute('tabindex', '0');
modalContent.focus();

// Manejar el scroll con las teclas ArrowUp y ArrowDown
modalContent.addEventListener('keydown', (e) => {
    const scrollStep = 30;  // 游댠 Cantidad de p칤xeles por desplazamiento
    const maxScroll = modalContent.scrollHeight - modalContent.clientHeight;
    const currentScroll = modalContent.scrollTop;

    // Desplazar hacia abajo con ArrowDown
    if (e.key === 'ArrowDown') {
        e.preventDefault();  // 游댠 Previene el desplazamiento de toda la p치gina
        if (currentScroll < maxScroll) {
            modalContent.scrollTop += scrollStep;
        }
    }

    // Desplazar hacia arriba con ArrowUp
    if (e.key === 'ArrowUp') {
        e.preventDefault();  // 游댠 Previene el desplazamiento de toda la p치gina
        if (currentScroll > 0) {
            modalContent.scrollTop -= scrollStep;
        }
    }
});
`} lang="js" title="scroll-modal.js"/>

---

### Estilo Requerido
Para que el **scroll** funcione correctamente, aseg칰rate de aplicar estos estilos en el contenido del modal:

<Code code={`
.modal-content {
    max-height: 80vh;  // 游댠 Limita la altura del modal
    overflow-y: auto;  // 游댠 Permite el desplazamiento vertical
}
`} lang="css" title="scroll-modal.css"/>


## Accesibilidad

## Animaciones para Modales
Aqu칤 se presentan las animaciones CSS para lograr efectos de entrada y salida en un modal, utilizando transiciones suaves y responsivas. Estas animaciones mejoran la experiencia del usuario al hacer que el modal aparezca y desaparezca de manera m치s natural.

<Code 
    code={`
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes popUp {
    from {
        top: 100%;
    }
    to {
        top: 0;
    }
}

@keyframes popDown {
    from {
        top: 0;
    }
    to {
        top: 100%;
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}
    `} 
    lang="css" title="animacion.css"
/>

### Modo de uso
Las animaciones se aplican mediante clases espec칤ficas en el modal para gestionar su entrada y salida de manera responsiva, diferenciando el comportamiento en dispositivos m칩viles y pantallas grandes.

<Code 
    code={`
.modalGC__section--entry-animation{
    animation: popUpModal 0.3s ease;
    animation-fill-mode: forwards;

    @media (min-width: 768px){
        animation: fadeInModal 0.3s ease;
        animation-fill-mode: forwards;
    }
}

.modalGC__section--exit-animation{
    animation: popDownModal 0.3s ease;
    animation-fill-mode: forwards;

    @media (min-width: 768px){
        animation: fadeOutModal 0.3s ease;
        animation-fill-mode: forwards;
    }
}
    `} 
    lang="css" title="estilos.css"
/>

### Explicaci칩n

- **popUpModal:** Desliza el modal hacia arriba con un efecto de aparici칩n suave (ideal para pantallas m칩viles).
- **popDownModal:** Desliza el modal hacia abajo, desapareciendo de forma natural.
- **fadeInModal y fadeOutModal:** Se usan en pantallas grandes para lograr transiciones de opacidad m치s sutiles y elegantes.
- **animation-fill-mode:** forwards; Mantiene el estado final de la animaci칩n despu칠s de completar la transici칩n.

### Consideraciones Importantes
Al cerrar el modal (ya sea mediante el bot칩n de cerrar, clic fuera del modal, tecla Escape, o swipe en dispositivos m칩viles), se debe:
1. Quitar la clase de animaci칩n de entrada (`modalGC__section--entry-animation`).
2. Aplicar la clase de animaci칩n de salida (`modalGC__section--exit-animation`).
3. Utilizar un `setTimeout` de 300ms para permitir que la animaci칩n de salida se complete antes de remover el modal del DOM.
4. Asegurarse de limpiar el DOM para evitar residuos de modales inactivos.
